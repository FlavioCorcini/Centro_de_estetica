<div class="main-container">

  <div class="stepper">
    <div class="step">
      <div class="circle" [class.active]="passoAtual >= 1">1</div>
      <span>Categoria</span>
    </div>
    <div class="line"></div>
    <div class="step">
      <div class="circle" [class.active]="passoAtual >= 2">2</div>
      <span>Servi√ßo</span>
    </div>
    <div class="line"></div>
    <div class="step">
      <div class="circle" [class.active]="passoAtual >= 3">3</div>
      <span>Profissional</span>
    </div>
    <div class="line"></div>
    <div class="step">
      <div class="circle" [class.active]="passoAtual >= 4">4</div>
      <span>Data/Hora</span>
    </div>
  </div>

  <div class="content-card">

    <div *ngIf="passoAtual === 1" class="fade-in">
      <div class="header-section">
        <h2>Escolha a Categoria</h2>
        <p>Selecione o tipo de servi√ßo desejado</p>
      </div>
      <div class="grid-areas">
        <div *ngFor="let area of areas" class="card-option" [class.selected]="areaSelecionada?.id === area.id"
          (click)="selecionarArea(area)">
          <div class="card-text">
            <h3>{{ area.nome }}</h3>
            <p>{{ area.descricao }}</p>
          </div>
        </div>
      </div>
      <div class="footer-actions">
        <button class="btn-proximo" [disabled]="!areaSelecionada" (click)="proximoPasso()">Pr√≥ximo ‚ûú</button>
      </div>
    </div>

    <div *ngIf="passoAtual === 2" class="fade-in">
      <div class="header-section">
        <button class="btn-voltar-link" (click)="voltar()">‚Üê Voltar</button>
        <h2>Escolha o Servi√ßo</h2>
        <p>Categoria: <strong>{{ areaSelecionada?.nome }}</strong></p>
      </div>
      <div class="grid-servicos">
        <div *ngFor="let servico of servicos" class="card-servico" (click)="selecionarServico(servico)">
          <div class="servico-info">
            <h3>{{ servico.nome }}</h3>
            <p>{{ servico.descricao }}</p>
            <small>‚è± {{ servico.tempoAtendimento }}</small>
          </div>
          <div class="servico-preco">R$ {{ servico.valor }}</div>
        </div>
      </div>
    </div>

    <div *ngIf="passoAtual === 3" class="fade-in">
      <div class="header-section">
        <button class="btn-voltar-link" (click)="voltar()">‚Üê Voltar</button>
        <h2>Escolha o Profissional</h2>
        <p>Servi√ßo: <strong>{{ servicoSelecionado?.nome }}</strong></p>
      </div>
      <div class="grid-profissionais">
        <div class="card-profissional" (click)="selecionarProfissional({id: null, nome: 'Sem prefer√™ncia'})">
          <div class="avatar">?</div>
          <div class="info">
            <h3>Sem prefer√™ncia</h3>
            <p>Primeiro hor√°rio livre</p>
          </div>
        </div>
        <div *ngFor="let prof of profissionais" class="card-profissional" (click)="selecionarProfissional(prof)">
          <div class="avatar">üë§</div>
          <div class="info">
            <h3>{{ prof.nome }}</h3>
            <p>Especialista</p>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="passoAtual === 4" class="fade-in split-layout">
      <div class="date-selection">
        <div class="header-section">
          <button class="btn-voltar-link" (click)="voltar()">‚Üê Voltar</button>
          <h2>Selecione a Data</h2>
          <p>Profissional: <strong>{{ profissionalSelecionado?.nome }}</strong></p>
        </div>

        <div class="input-group">
          <label>Data:</label>
          <input type="date" [(ngModel)]="dataSelecionada" class="custom-input">
        </div>
        <div class="input-group">
          <label>Hor√°rio:</label>
          <input type="time" [(ngModel)]="horaSelecionada" class="custom-input">
        </div>
      </div>

      <div class="resumo-card">
        <h3>Resumo do Agendamento</h3>
        <div class="resumo-item"><span>Categoria:</span> <strong>{{ areaSelecionada?.nome }}</strong></div>
        <div class="resumo-item"><span>Servi√ßo:</span> <strong>{{ servicoSelecionado?.nome }}</strong></div>
        <div class="resumo-item"><span>Profissional:</span> <strong>{{ profissionalSelecionado?.nome }}</strong></div>
        <div class="resumo-item"><span>Valor Total:</span> <strong class="valor">R$ {{ servicoSelecionado?.valor
            }}</strong></div>

        <button class="btn-confirmar" [disabled]="!dataSelecionada || !horaSelecionada"
          (click)="finalizarAgendamento()">
          üí≤ Confirmar Agendamento
        </button>
      </div>
    </div>

  </div>
</div>